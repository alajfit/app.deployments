# app.deployments
ArgoCD Deployments

## For Windows
- Install Kubernetes
- Install Helm
- Install Cygwin

## Step by Step
1. Create a Cluster Digital Ocean
2. Download config
3. Move config file to ~/.kube
4. Rename file to just config with no extension
5. Run the following commands:
    1. helo repo remove argo
    2. helm repo add argo https://argoproj.github.io/argo-helm
    3. helm fetch argo/argo-cd --untar
    4. cd ./argo-cd
    5. kubectl create namespace argocd
    6. kubectl apply -f ./crds/
    7. helm --namespace argocd --set server.extraArgs={--insecure} template --release-name release . | kubectl apply -n argocd -f -
6. Create bootstrap folder
    1. Add grouping permissions file - app.deployments\bootstrap\01-grouping-permissions.yaml
    2. Add parent applications file - app.deployments\bootstrap\02-parent-application.yaml
7. Created Applications folder
    1. Add Chart.yaml file
    2. Add values.yaml
    3. Add templates folder - this holds templates of projects, used for string replaced to create concreate kubernetes resources
    4. Add kube-system folder - Namespace for Kube system is autogenerated and not reqired as a yaml file
        1. Add permissions file
        2. Add the applications file
8. Apply the charts into the Cluster with the following command
    1. ```sh $ kubectl apply -n argocd -f bootstrap-yaml```
9. Get the server name
    1. ```sh $ kubectl get pods -n argocd```
10. Forward ArgoCD UI to local machine
    1. kubectl port-forward <REPLACE WITH NAME FROM PREVIOUS COMMAND> 8888:8080 -n argocd
11. Go to localhost:8888
12. Login
    1. User: admin
    2. Password got from running the following command: 
        1. ```sh $ kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d```
13. Sync Metrics Server within the UI
14. Check Metrics through the CLI using the following command (this may take some time to work)
    1. ```sh $ kubectl top nodes```
    2. ```sh $ kubectl top pods --all-namespaces```
